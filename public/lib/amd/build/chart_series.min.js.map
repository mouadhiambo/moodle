{"version":3,"file":"chart_series.min.js","sources":["../src/chart_series.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Chart series.\r\n *\r\n * @copyright  2016 Frédéric Massart - FMCorz.net\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @module     core/chart_series\r\n */\r\ndefine([], function() {\r\n\r\n    /**\r\n     * Chart data series.\r\n     *\r\n     * @class\r\n     * @param {String} label The series label.\r\n     * @param {Number[]} values The values.\r\n     */\r\n    function Series(label, values) {\r\n        if (typeof label !== 'string') {\r\n            throw new Error('Invalid label for series.');\r\n\r\n        } else if (typeof values !== 'object') {\r\n            throw new Error('Values for a series must be an array.');\r\n\r\n        } else if (values.length < 1) {\r\n            throw new Error('Invalid values received for series.');\r\n        }\r\n\r\n        this._colors = [];\r\n        this._label = label;\r\n        this._values = values;\r\n    }\r\n\r\n    /**\r\n     * The default type of series.\r\n     *\r\n     * @type {Null}\r\n     * @const\r\n     */\r\n    Series.prototype.TYPE_DEFAULT = null;\r\n\r\n    /**\r\n     * Type of series 'line'.\r\n     *\r\n     * @type {String}\r\n     * @const\r\n     */\r\n    Series.prototype.TYPE_LINE = 'line';\r\n\r\n    /**\r\n     * The colors of the series.\r\n     *\r\n     * @type {String[]}\r\n     * @protected\r\n     */\r\n    Series.prototype._colors = null;\r\n\r\n    /**\r\n     * The fill mode of the series.\r\n     *\r\n     * @type {Object}\r\n     * @protected\r\n     */\r\n    Series.prototype._fill = false;\r\n\r\n    /**\r\n     * The label of the series.\r\n     *\r\n     * @type {String}\r\n     * @protected\r\n     */\r\n    Series.prototype._label = null;\r\n\r\n    /**\r\n     * The labels for the values of the series.\r\n     *\r\n     * @type {String[]}\r\n     * @protected\r\n     */\r\n     Series.prototype._labels = null;\r\n\r\n    /**\r\n     * Whether the line of the serie should be smooth or not.\r\n     *\r\n     * @type {Bool}\r\n     * @protected\r\n     */\r\n    Series.prototype._smooth = false;\r\n\r\n    /**\r\n     * The type of the series.\r\n     *\r\n     * @type {String}\r\n     * @protected\r\n     */\r\n    Series.prototype._type = Series.prototype.TYPE_DEFAULT;\r\n\r\n    /**\r\n     * The values in the series.\r\n     *\r\n     * @type {Number[]}\r\n     * @protected\r\n     */\r\n    Series.prototype._values = null;\r\n\r\n    /**\r\n     * The index of the X axis.\r\n     *\r\n     * @type {Number[]}\r\n     * @protected\r\n     */\r\n    Series.prototype._xaxis = null;\r\n\r\n    /**\r\n     * The index of the Y axis.\r\n     *\r\n     * @type {Number[]}\r\n     * @protected\r\n     */\r\n    Series.prototype._yaxis = null;\r\n\r\n    /**\r\n     * Create a new instance of a series from serialised data.\r\n     *\r\n     * @static\r\n     * @method create\r\n     * @param {Object} obj The data of the series.\r\n     * @return {module:core/chart_series}\r\n     */\r\n    Series.prototype.create = function(obj) {\r\n        var s = new Series(obj.label, obj.values);\r\n        s.setType(obj.type);\r\n        s.setXAxis(obj.axes.x);\r\n        s.setYAxis(obj.axes.y);\r\n        s.setLabels(obj.labels);\r\n\r\n        // Colors are exported as an array with 1, or n values.\r\n        if (obj.colors && obj.colors.length > 1) {\r\n            s.setColors(obj.colors);\r\n        } else {\r\n            s.setColor(obj.colors[0]);\r\n        }\r\n\r\n        s.setFill(obj.fill);\r\n        s.setSmooth(obj.smooth);\r\n        return s;\r\n    };\r\n\r\n    /**\r\n     * Get the color.\r\n     *\r\n     * @return {String}\r\n     */\r\n    Series.prototype.getColor = function() {\r\n        return this._colors[0] || null;\r\n    };\r\n\r\n    /**\r\n     * Get the colors for each value in the series.\r\n     *\r\n     * @return {String[]}\r\n     */\r\n    Series.prototype.getColors = function() {\r\n        return this._colors;\r\n    };\r\n\r\n    /**\r\n     * Get the number of values in the series.\r\n     *\r\n     * @return {Number}\r\n     */\r\n    Series.prototype.getCount = function() {\r\n        return this._values.length;\r\n    };\r\n\r\n    /**\r\n     * Get the fill mode of the series.\r\n     *\r\n     * @return {Object}\r\n     */\r\n    Series.prototype.getFill = function() {\r\n      return this._fill;\r\n    };\r\n\r\n    /**\r\n     * Get the series label.\r\n     *\r\n     * @return {String}\r\n     */\r\n    Series.prototype.getLabel = function() {\r\n        return this._label;\r\n    };\r\n\r\n    /**\r\n     * Get labels for the values of the series.\r\n     *\r\n     * @return {String[]}\r\n     */\r\n    Series.prototype.getLabels = function() {\r\n        return this._labels;\r\n    };\r\n\r\n    /**\r\n     * Get whether the line of the serie should be smooth or not.\r\n     *\r\n     * @returns {Bool}\r\n     */\r\n    Series.prototype.getSmooth = function() {\r\n        return this._smooth;\r\n    };\r\n\r\n    /**\r\n     * Get the series type.\r\n     *\r\n     * @return {String}\r\n     */\r\n    Series.prototype.getType = function() {\r\n        return this._type;\r\n    };\r\n\r\n    /**\r\n     * Get the series values.\r\n     *\r\n     * @return {Number[]}\r\n     */\r\n    Series.prototype.getValues = function() {\r\n        return this._values;\r\n    };\r\n\r\n    /**\r\n     * Get the index of the X axis.\r\n     *\r\n     * @return {Number}\r\n     */\r\n    Series.prototype.getXAxis = function() {\r\n        return this._xaxis;\r\n    };\r\n\r\n    /**\r\n     * Get the index of the Y axis.\r\n     *\r\n     * @return {Number}\r\n     */\r\n    Series.prototype.getYAxis = function() {\r\n        return this._yaxis;\r\n    };\r\n\r\n    /**\r\n     * Whether there is a color per value.\r\n     *\r\n     * @return {Bool}\r\n     */\r\n    Series.prototype.hasColoredValues = function() {\r\n        return this._colors.length == this.getCount();\r\n    };\r\n\r\n    /**\r\n     * Set the series color.\r\n     *\r\n     * @param {String} color A CSS-compatible color.\r\n     */\r\n    Series.prototype.setColor = function(color) {\r\n        this._colors = [color];\r\n    };\r\n\r\n    /**\r\n     * Set a color for each value in the series.\r\n     *\r\n     * @param {String[]} colors CSS-compatible colors.\r\n     */\r\n    Series.prototype.setColors = function(colors) {\r\n        if (colors && colors.length != this.getCount()) {\r\n            throw new Error('When setting multiple colors there must be one per value.');\r\n        }\r\n        this._colors = colors || [];\r\n    };\r\n\r\n    /**\r\n     * Set the fill mode for the series.\r\n     *\r\n     * @param {Object} fill\r\n     */\r\n    Series.prototype.setFill = function(fill) {\r\n      this._fill = typeof fill === 'undefined' ? null : fill;\r\n    };\r\n\r\n    /**\r\n     * Set the labels for the values of the series.\r\n     *\r\n     * @param {String[]} labels the labels of the series values.\r\n     */\r\n    Series.prototype.setLabels = function(labels) {\r\n        this._validateLabels(labels);\r\n        labels = typeof labels === 'undefined' ? null : labels;\r\n        this._labels = labels;\r\n    };\r\n\r\n    /**\r\n     * Set Whether the line of the serie should be smooth or not.\r\n     *\r\n     * Only applicable for line chart or a line series, if null it assumes the chart default (not smooth).\r\n     *\r\n     * @param {Bool} smooth True if the lines should be smooth, false for tensioned lines.\r\n     */\r\n    Series.prototype.setSmooth = function(smooth) {\r\n        smooth = typeof smooth === 'undefined' ? null : smooth;\r\n        this._smooth = smooth;\r\n    };\r\n\r\n    /**\r\n     * Set the type of the series.\r\n     *\r\n     * @param {String} type A type constant value.\r\n     */\r\n    Series.prototype.setType = function(type) {\r\n        if (type != this.TYPE_DEFAULT && type != this.TYPE_LINE) {\r\n            throw new Error('Invalid serie type.');\r\n        }\r\n        this._type = type || null;\r\n    };\r\n\r\n    /**\r\n     * Set the index of the X axis.\r\n     *\r\n     * @param {Number} index The index.\r\n     */\r\n    Series.prototype.setXAxis = function(index) {\r\n        this._xaxis = index || null;\r\n    };\r\n\r\n\r\n    /**\r\n     * Set the index of the Y axis.\r\n     *\r\n     * @param {Number} index The index.\r\n     */\r\n    Series.prototype.setYAxis = function(index) {\r\n        this._yaxis = index || null;\r\n    };\r\n\r\n    /**\r\n     * Validate series labels.\r\n     *\r\n     * @protected\r\n     * @param {String[]} labels The labels of the serie.\r\n     */\r\n    Series.prototype._validateLabels = function(labels) {\r\n        if (labels && labels.length > 0 && labels.length != this.getCount()) {\r\n            throw new Error('Series labels must match series values.');\r\n        }\r\n    };\r\n\r\n    return Series;\r\n\r\n});\r\n"],"names":["define","Series","label","values","Error","length","_colors","_label","_values","prototype","TYPE_DEFAULT","TYPE_LINE","_fill","_labels","_smooth","_type","_xaxis","_yaxis","create","obj","s","setType","type","setXAxis","axes","x","setYAxis","y","setLabels","labels","colors","setColors","setColor","setFill","fill","setSmooth","smooth","getColor","this","getColors","getCount","getFill","getLabel","getLabels","getSmooth","getType","getValues","getXAxis","getYAxis","hasColoredValues","color","_validateLabels","index"],"mappings":"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"}