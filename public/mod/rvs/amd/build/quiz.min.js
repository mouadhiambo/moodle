/**
 * Quiz module for RVS
 *
 * @module     mod_rvs/quiz
 * @copyright  2025 RVIBS
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_rvs/quiz",["jquery"],(function($){var userAnswers={},filteredQuestions=[];return{init:function(){void 0!==window.quizData&&(filteredQuestions=window.quizData,this.renderQuiz(),this.setupEventHandlers())},renderQuiz:function(){var container=$("#quiz-questions");if(0!==filteredQuestions.length){var html="";filteredQuestions.forEach(function(question){html+='<div class="quiz-question card mb-3" data-question-id="'+question.id+'">',html+='<div class="card-body">',html+='<div class="d-flex justify-content-between align-items-start mb-3">',html+='<h5 class="mb-0">Question '+question.number+"</h5>",html+='<span class="badge badge-'+this.getDifficultyClass(question.difficulty)+'">',html+=question.difficulty.toUpperCase(),html+="</span>",html+="</div>",html+='<p class="question-text">'+question.question+"</p>",html+='<div class="quiz-options">',question.options.forEach((function(option,optIndex){html+='<div class="form-check">',html+='<input class="form-check-input quiz-option" type="radio" ',html+='name="question_'+question.id+'" ',html+='id="q'+question.id+"_opt"+optIndex+'" ',html+='value="'+optIndex+'">',html+='<label class="form-check-label" for="q'+question.id+"_opt"+optIndex+'">',html+=option,html+="</label>",html+="</div>"})),html+="</div>",html+='<div class="quiz-explanation alert alert-info mt-3" style="display: none;">',html+="<strong>Explanation:</strong> "+question.explanation,html+="</div>",html+="</div>",html+="</div>"}.bind(this)),container.html(html),this.addStyles()}else container.html('<div class="alert alert-info">No questions match the selected filter.</div>')},getDifficultyClass:function(difficulty){switch(difficulty){case"easy":return"success";case"medium":return"warning";case"hard":return"danger";default:return"secondary"}},setupEventHandlers:function(){var self=this;$(".quiz-option").on("change",(function(){var questionId=$(this).closest(".quiz-question").data("question-id");userAnswers[questionId]=parseInt($(this).val())})),$("#check-answers").on("click",(function(){self.checkAnswers()})),$("#reset-quiz").on("click",(function(){self.resetQuiz()})),$("#quiz-difficulty-filter").on("change",(function(){var difficulty=$(this).val();filteredQuestions="all"===difficulty?window.quizData:window.quizData.filter((function(q){return q.difficulty===difficulty})),userAnswers={},self.renderQuiz(),self.setupEventHandlers()}))},checkAnswers:function(){var correct=0,total=filteredQuestions.length;filteredQuestions.forEach((function(question){var questionCard=$('.quiz-question[data-question-id="'+question.id+'"]'),userAnswer=userAnswers[question.id];questionCard.find(".quiz-options .form-check").removeClass("correct-answer incorrect-answer"),void 0!==userAnswer?(userAnswer===question.correctanswer?(correct++,questionCard.find(".quiz-options .form-check").eq(userAnswer).addClass("correct-answer")):(questionCard.find(".quiz-options .form-check").eq(userAnswer).addClass("incorrect-answer"),questionCard.find(".quiz-options .form-check").eq(question.correctanswer).addClass("correct-answer")),questionCard.find(".quiz-explanation").slideDown()):questionCard.find(".quiz-options .form-check").eq(question.correctanswer).addClass("correct-answer")}));var percentage=total>0?Math.round(correct/total*100):0,resultHtml='<div class="alert alert-'+this.getScoreClass(percentage)+'">';resultHtml+="<h4>Your Score: "+correct+" / "+total+" ("+percentage+"%)</h4>",resultHtml+=percentage>=80?"<p>Excellent work! You have a strong understanding of the material.</p>":percentage>=60?"<p>Good job! Review the explanations for questions you missed.</p>":"<p>Keep studying! Review the material and try again.</p>",resultHtml+="</div>",$("#quiz-results").html(resultHtml).slideDown()},getScoreClass:function(percentage){return percentage>=80?"success":percentage>=60?"warning":"danger"},resetQuiz:function(){userAnswers={},$(".quiz-option").prop("checked",!1),$(".quiz-options .form-check").removeClass("correct-answer incorrect-answer"),$(".quiz-explanation").slideUp(),$("#quiz-results").slideUp()},addStyles:function(){if(!document.getElementById("rvs-quiz-styles")){var style=document.createElement("style");style.id="rvs-quiz-styles",style.textContent="\n                .quiz-question {\n                    border-left: 4px solid #0f6cbf;\n                }\n                .quiz-options .form-check {\n                    padding: 10px;\n                    margin: 5px 0;\n                    border-radius: 5px;\n                    transition: background-color 0.3s;\n                }\n                .quiz-options .form-check:hover {\n                    background-color: #f8f9fa;\n                }\n                .quiz-options .form-check.correct-answer {\n                    background-color: #d4edda;\n                    border: 1px solid #c3e6cb;\n                }\n                .quiz-options .form-check.incorrect-answer {\n                    background-color: #f8d7da;\n                    border: 1px solid #f5c6cb;\n                }\n                .quiz-options .form-check.correct-answer label {\n                    color: #155724;\n                    font-weight: bold;\n                }\n                .quiz-options .form-check.incorrect-answer label {\n                    color: #721c24;\n                }\n                .question-text {\n                    font-size: 16px;\n                    line-height: 1.6;\n                    margin-bottom: 15px;\n                }\n                .quiz-explanation {\n                    margin-top: 15px;\n                }\n            ",document.head.appendChild(style)}}}}));

//# sourceMappingURL=quiz.min.js.map